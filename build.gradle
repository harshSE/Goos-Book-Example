/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.6.3/userguide/tutorial_groovy_projects.html
 */

plugins {
    id 'groovy'
}

repositories {
    jcenter()
}

sourceSets {
    endToEndTest{
        compileClasspath += sourceSets.main.output
        runtimeClasspath += sourceSets.main.output
    }
}

configurations {
    endToEndTestImplementation.extendsFrom implementation
    endToEndTestRuntimeOnly.extendsFrom runtimeOnly
}

test {
    useJUnitPlatform()
}

task endToEndTests(type: Test) {

    testClassesDirs = sourceSets.endToEndTest.output.classesDirs
    classpath = sourceSets.endToEndTest.runtimeClasspath

    useJUnitPlatform()

}

check.dependsOn endToEndTests

dependencies {
    // Use the latest Groovy version for building this library
    implementation 'org.codehaus.groovy:groovy-all:3.0.2'
    implementation('org.igniterealtime.smack:smack-tcp:4.3.4')
    implementation('org.igniterealtime.smack:smack-java7:4.3.4')
    implementation('org.igniterealtime.smack:smack-experimental:4.3.4')
    implementation('org.igniterealtime.smack:smack-im:4.3.4')

    testRuntimeOnly('org.junit.platform:junit-platform-launcher:1.6.1')
    testRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.6.1')
    testRuntimeOnly('org.junit.vintage:junit-vintage-engine:5.6.1')

    testImplementation('org.spockframework:spock-core:2.0-M2-groovy-3.0')
    testImplementation('net.bytebuddy:byte-buddy:1.10.9')



    endToEndTestImplementation('org.junit.jupiter:junit-jupiter-api:5.6.1')
    endToEndTestImplementation('org.spockframework:spock-core:2.0-M2-groovy-3.0')
    endToEndTestImplementation('com.googlecode.windowlicker:windowlicker-swing:r268')
    endToEndTestImplementation('org.assertj:assertj-core:3.15.0')


    endToEndTestRuntimeOnly('org.junit.platform:junit-platform-launcher:1.6.1')
    endToEndTestRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.6.1')
    endToEndTestRuntimeOnly('org.junit.vintage:junit-vintage-engine:5.6.1')
}
