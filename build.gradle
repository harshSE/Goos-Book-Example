/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Groovy project to get you started.
 * For more details take a look at the Groovy Quickstart chapter in the Gradle
 * User Manual available at https://docs.gradle.org/5.6.3/userguide/tutorial_groovy_projects.html
 */

plugins {
    id 'groovy'
}

repositories {
    jcenter()
}

sourceSets {
    endToEndTest{
        compileClasspath += sourceSets.main.output
        runtimeClasspath += sourceSets.main.output
    }

    integrationTest{
        compileClasspath += sourceSets.main.output
        runtimeClasspath += sourceSets.main.output
    }
}

configurations {
    endToEndTestImplementation.extendsFrom implementation
    endToEndTestRuntimeOnly.extendsFrom runtimeOnly

    integrationTestImplementation.extendsFrom implementation
    integrationTestRuntimeOnly.extendsFrom runtimeOnly
}

test {
    useJUnitPlatform()
}

task endToEndTests(type: Test) {

    testClassesDirs = sourceSets.endToEndTest.output.classesDirs
    classpath = sourceSets.endToEndTest.runtimeClasspath

    useJUnitPlatform()

}

task integrationTest(type: Test) {
    testClassesDirs = sourceSets.integrationTest.output.classesDirs
    classpath = sourceSets.integrationTest.runtimeClasspath

    useJUnitPlatform()
}

check.dependsOn endToEndTests
check.dependsOn integrationTest

dependencies {
    // Use the latest Groovy version for building this library
    implementation 'org.codehaus.groovy:groovy-all:3.0.0'
    implementation('org.igniterealtime.smack:smack-tcp:4.3.4')
    implementation('org.igniterealtime.smack:smack-java7:4.3.4')
    implementation('org.igniterealtime.smack:smack-experimental:4.3.4')
    implementation('org.igniterealtime.smack:smack-im:4.3.4')


    /**
     * Unit testing libs
     */
    integrationTestRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.6.1')


    testImplementation('org.spockframework:spock-core:2.0-M2-groovy-3.0')
    testImplementation('net.bytebuddy:byte-buddy:1.10.9')
    testImplementation('org.objenesis:objenesis:3.1')

    /**
     * Integration test libs
     */

    integrationTestImplementation project(':test-common')
    integrationTestImplementation('org.junit.jupiter:junit-jupiter-api:5.6.1')
    integrationTestImplementation('org.spockframework:spock-core:2.0-M2-groovy-3.0')
    integrationTestImplementation('com.googlecode.windowlicker:windowlicker-swing:r268')
    integrationTestImplementation('org.assertj:assertj-core:3.15.0')
    integrationTestImplementation('net.bytebuddy:byte-buddy:1.10.9')
    integrationTestImplementation('org.objenesis:objenesis:3.1')



    integrationTestRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.6.1')

    /**
     * End to End test libs
     */

    endToEndTestImplementation project(':test-common')
    endToEndTestImplementation('org.junit.jupiter:junit-jupiter-api:5.6.1')
    endToEndTestImplementation('org.spockframework:spock-core:2.0-M2-groovy-3.0')
    endToEndTestImplementation('org.assertj:assertj-core:3.15.0')
    endToEndTestImplementation('com.googlecode.windowlicker:windowlicker-swing:r268')
    endToEndTestRuntimeOnly('org.junit.jupiter:junit-jupiter-engine:5.6.1')



}
